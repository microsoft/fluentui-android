/*
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */

buildscript {
    ext.kotlin_version = '1.2.60'
    repositories {
        google()
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.2.1'
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.+'
    }
}

allprojects {
    project.ext {
        constants = [
                minSdkVersion: 21,
                targetSdkVersion: 28,
                compileSdkVersion: 28,
        ]

        buildToolVersion          =    '29.0.3'
        kotlin_version            =    '1.2.60'
        supportVersion            =    '28.0.0'
        junitVersion              =    '4.12'
        testRunnerVersion         =    '1.0.2'
        espressoVersion           =    '3.0.2'
        roboelectricVersion       =    '4.4'
        constraintLayoutVersion   =    '2.0.1'
        duoVersion                =    '1.0.0-alpha01'
        tokenautocompleteVersion  =    '2.0.8'
        threetenabpVersion        =    '1.1.0'
        universalPkgDir           =     "universal"

    }
    repositories {
        google()
        jcenter()
        maven {
            url "https://pkgs.dev.azure.com/MicrosoftDeviceSDK/DuoSDK-Public/_packaging/Duo-SDK-Feed/maven/v1"
        }
    }
}

task makeUniversalPkg(type: Copy) {
    from('.')
    include('**/*.aar')
    exclude('**/FluentUI-release.aar')
    exclude("$universalPkgDir")
    into("$rootDir/$universalPkgDir/libs")
    includeEmptyDirs = false
    eachFile {
        path = name
    }
    rename '(.+)-release', '$1'
}

task clean(type: Delete) {
    delete rootProject.buildDir
}
